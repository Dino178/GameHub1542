<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Skill Games Hub</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f4f4f4; }
    #game { margin: 20px auto; padding: 20px; max-width: 600px; background: white; border-radius: 10px; box-shadow: 0 0 10px gray; }
    button { margin: 10px; padding: 10px 20px; font-size: 16px; }
    input { margin: 5px; padding: 5px; font-size: 16px; }
    .leaderboard { margin-top: 20px; text-align: left; }
  </style>
</head>
<body>
  <h1>üéÆ Skill Games Hub</h1>
  <div id="game"></div>

  <script>
    // ---- Leaderboard Storage ----
    function getLeaderboard(game, mode) {
      let data = JSON.parse(localStorage.getItem("leaderboard_" + game + "_" + mode) || "[]");
      return data;
    }

    function saveLeaderboard(game, mode, entry, compareFn) {
      let data = getLeaderboard(game, mode);
      data.push(entry);
      data.sort(compareFn);
      if (data.length > 100) data = data.slice(0, 100);
      localStorage.setItem("leaderboard_" + game + "_" + mode, JSON.stringify(data));
    }

    function showLeaderboard(game, mode, compareFn) {
      let data = getLeaderboard(game, mode).sort(compareFn);
      let html = "<h3>üèÜ Leaderboard</h3><ol>";
      data.forEach(e => {
        html += `<li>${e.name} ‚Äî Score: ${e.score}, Time: ${(e.timeTaken/1000).toFixed(3)}s</li>`;
      });
      html += "</ol>";
      return html;
    }

    // ---- Menu ----
    function showMenu() {
      document.getElementById("game").innerHTML = `
        <h2>Select a Game</h2>
        <button onclick="askUsername('guess')">Guess the Number</button>
        <button onclick="askUsername('math')">Math Quiz</button>
        <button onclick="askUsername('reaction')">Reaction Test</button>
        <button onclick="askUsername('typing')">Gibberish Typing</button>
        <button onclick="askUsername('numberMemory')">Number Memory</button>
        <button onclick="askUsername('sequenceTap')">Sequence Tap</button>
        <button onclick="askUsername('wordMemory')">Word Memory Chain</button>
      `;
    }

    function askUsername(game) {
      document.getElementById("game").innerHTML = `
        <h2>Enter Username</h2>
        <input id="usernameInput" type="text" placeholder="Your name">
        <button onclick="startGame('${game}')">Start</button>
      `;
      document.getElementById("usernameInput").addEventListener("keydown", e => {
        if (e.key === "Enter") startGame(game);
      });
    }

    function startGame(game) {
      const username = document.getElementById("usernameInput").value.trim();
      if (!username) return alert("Enter a username!");
      if (game === "guess") startGuess(username);
      if (game === "math") startMath(username);
      if (game === "reaction") startReaction(username);
      if (game === "typing") startTyping(username);
      if (game === "numberMemory") startNumberMemory(username);
      if (game === "sequenceTap") startSequenceTap(username);
      if (game === "wordMemory") startWordMemory(username);
    }

    // ---- Guess the Number ----
    function startGuess(username) {
      const target = Math.floor(Math.random() * 100) + 1;
      let attempts = 0;
      const start = performance.now();

      document.getElementById("game").innerHTML = `
        <h2>Guess the Number (1-100)</h2>
        <input id="guessInput" type="number" min="1" max="100">
        <button onclick="checkGuess()">Submit</button>
        <p id="feedback"></p>
      `;

      function endGame(success) {
        const timeTaken = performance.now() - start;
        document.getElementById("game").innerHTML = `
          <h2>${success ? "Correct!" : "Game Over"}</h2>
          <p>You used ${attempts} attempts in ${(timeTaken/1000).toFixed(3)}s.</p>
          <p>Player: ${username}</p>
          ${success ? showLeaderboard("guess","default",(a,b)=>a.score-b.score||a.timeTaken-b.timeTaken):""}
          <button onclick="showMenu()">Back to Menu</button>
        `;
        if (success) saveLeaderboard("guess","default",{name:username,score:attempts,timeTaken},(a,b)=>a.score-b.score||a.timeTaken-b.timeTaken);
      }

      window.checkGuess = function() {
        let val = parseInt(document.getElementById("guessInput").value);
        if (!val) return;
        attempts++;
        if (val === target) endGame(true);
        else document.getElementById("feedback").innerText = val > target ? "Too high!" : "Too low!";
      };

      document.getElementById("guessInput").addEventListener("keydown", e => {
        if (e.key === "Enter") checkGuess();
      });
    }

    // ---- Math Quiz ----
    function startMath(username) {
      let start = performance.now();
      let correct = 0;
      let total = 5;
      let q = 0;

      function ask() {
        if (q >= total) return finish();
        let a = Math.floor(Math.random()*10+1);
        let b = Math.floor(Math.random()*10+1);
        let ans = a+b;
        document.getElementById("game").innerHTML = `
          <h2>Math Quiz</h2>
          <p>${a} + ${b} = ?</p>
          <input id="mathInput" type="number">
          <button onclick="submitMath(${ans})">Submit</button>
        `;
        document.getElementById("mathInput").addEventListener("keydown", e => {
          if (e.key==="Enter") submitMath(ans);
        });
      }

      window.submitMath = function(ans) {
        let val = parseInt(document.getElementById("mathInput").value);
        if (val === ans) correct++;
        q++; ask();
      };

      function finish() {
        let timeTaken = performance.now()-start;
        document.getElementById("game").innerHTML = `
          <h2>Math Quiz Finished</h2>
          <p>${username}: ${correct}/${total} correct in ${(timeTaken/1000).toFixed(3)}s</p>
          ${correct===total?showLeaderboard("math","default",(a,b)=>a.timeTaken-b.timeTaken):""}
          <button onclick="showMenu()">Back to Menu</button>
        `;
        if (correct===total) saveLeaderboard("math","default",{name:username,score:correct,timeTaken},(a,b)=>a.timeTaken-b.timeTaken);
      }

      ask();
    }

    // ---- Reaction Test ----
    function startReaction(username) {
      const gameDiv = document.getElementById("game");
      gameDiv.innerHTML = `<p>Wait for green...</p>`;
      let startTime, clickedEarly=false;
      setTimeout(() => {
        gameDiv.innerHTML = `<button id="clickBtn" style="font-size:20px;">CLICK!</button>`;
        startTime = performance.now();
        document.getElementById("clickBtn").onclick = () => {
          const reaction = performance.now()-startTime;
          end(reaction);
        };
      }, Math.random()*3000+2000);

      gameDiv.onclick = () => { if (!startTime) clickedEarly=true; };

      function end(time) {
        gameDiv.innerHTML = `
          <p>${username}, your reaction time: ${time.toFixed(3)} ms</p>
          ${!clickedEarly?showLeaderboard("reaction","default",(a,b)=>a.timeTaken-b.timeTaken):"<p>(Too early, not on leaderboard)</p>"}
          <button onclick="showMenu()">Back to Menu</button>
        `;
        if (!clickedEarly) saveLeaderboard("reaction","default",{name:username,score:time,timeTaken:time},(a,b)=>a.timeTaken-b.timeTaken);
      }
    }

    // ---- Gibberish Typing ----
    function startTyping(username) {
      let words = Array.from({length:20},()=>Math.random().toString(36).substring(2,7));
      let text = words.join(" ");
      let start = performance.now();
      document.getElementById("game").innerHTML = `
        <h2>Typing Test</h2>
        <p>${text}</p>
        <textarea id="typeBox" rows="3" cols="40"></textarea><br>
        <button onclick="endTyping()">Submit</button>
      `;
      window.endTyping = function() {
        let typed = document.getElementById("typeBox").value.trim();
        let timeTaken = performance.now()-start;
        let correct = typed===text;
        document.getElementById("game").innerHTML = `
          <h2>Typing Finished</h2>
          <p>${username}: ${(timeTaken/1000).toFixed(3)}s ‚Äî ${correct?"100% Accuracy ‚úÖ":"‚ùå Wrong"}</p>
          ${correct?showLeaderboard("typing","default",(a,b)=>a.timeTaken-b.timeTaken):""}
          <button onclick="showMenu()">Back to Menu</button>
        `;
        if (correct) saveLeaderboard("typing","default",{name:username,score:timeTaken,timeTaken},(a,b)=>a.timeTaken-b.timeTaken);
      };
    }

    // ---- Number Memory ----
    function startNumberMemory(username) {
      let num = Math.floor(Math.random()*90000)+10000;
      document.getElementById("game").innerHTML = `<h2>Memorize: ${num}</h2>`;
      setTimeout(()=> {
        document.getElementById("game").innerHTML=`
          <p>Enter the number:</p>
          <input id="nmInput" type="text">
          <button onclick="endNM()">Submit</button>
        `;
        document.getElementById("nmInput").addEventListener("keydown", e=>{
          if (e.key==="Enter") endNM();
        });
      },2000);
      const start=performance.now();
      window.endNM=function(){
        let val=document.getElementById("nmInput").value.trim();
        let timeTaken=performance.now()-start;
        let correct=val==num;
        document.getElementById("game").innerHTML=`
          <h2>Number Memory</h2>
          <p>${username}: ${correct?"Correct":"Wrong"} in ${(timeTaken/1000).toFixed(3)}s</p>
          ${correct?showLeaderboard("numberMemory","default",(a,b)=>a.timeTaken-b.timeTaken):""}
          <button onclick="showMenu()">Back to Menu</button>
        `;
        if (correct) saveLeaderboard("numberMemory","default",{name:username,score:timeTaken,timeTaken},(a,b)=>a.timeTaken-b.timeTaken);
      };
    }

    // ---- Sequence Tap (colors) ----
    function startSequenceTap(username) {
      let colors=["red","green","blue","yellow"];
      let seq=[colors[Math.floor(Math.random()*4)]];
      let userSeq=[];
      const start=performance.now();
      function showSeq(){
        let html="<h2>Sequence Tap</h2><p>Watch...</p>";
        document.getElementById("game").innerHTML=html;
        let i=0;
        let interval=setInterval(()=>{
          document.getElementById("game").innerHTML=`<h2 style="color:${seq[i]}">${seq[i]}</h2>`;
          i++;
          if(i>=seq.length){clearInterval(interval); setTimeout(()=>askInput(),500);}
        },1000);
      }
      function askInput(){
        document.getElementById("game").innerHTML=`
          <h2>Repeat Sequence</h2>
          ${colors.map(c=>`<button onclick="tap('${c}')">${c}</button>`).join("")}
        `;
      }
      window.tap=function(c){
        userSeq.push(c);
        if(userSeq[userSeq.length-1]!==seq[userSeq.length-1]) return end(false);
        if(userSeq.length===seq.length) return end(true);
      };
      function end(correct){
        let timeTaken=performance.now()-start;
        document.getElementById("game").innerHTML=`
          <h2>Sequence Tap</h2>
          <p>${username}: ${correct?"Correct":"Wrong"} in ${(timeTaken/1000).toFixed(3)}s</p>
          ${correct?showLeaderboard("sequenceTap","default",(a,b)=>a.timeTaken-b.timeTaken):""}
          <button onclick="showMenu()">Back to Menu</button>
        `;
        if(correct) saveLeaderboard("sequenceTap","default",{name:username,score:timeTaken,timeTaken},(a,b)=>a.timeTaken-b.timeTaken);
      }
      showSeq();
    }

    // ---- Word Memory Chain ----
    function startWordMemory(username) {
      let words=["apple","dog","car","house","tree","water","sky","book"];
      let chain=Array.from({length:4},()=>words[Math.floor(Math.random()*words.length)]);
      document.getElementById("game").innerHTML=`<h2>Memorize: ${chain.join(" ")}</h2>`;
      setTimeout(()=>{
        document.getElementById("game").innerHTML=`
          <p>Enter words in order:</p>
          <input id="wmInput" type="text">
          <button onclick="endWM()">Submit</button>
        `;
        document.getElementById("wmInput").addEventListener("keydown",e=>{
          if(e.key==="Enter") endWM();
        });
      },3000);
      const start=performance.now();
      window.endWM=function(){
        let val=document.getElementById("wmInput").value.trim().split(" ");
        let timeTaken=performance.now()-start;
        let correct=JSON.stringify(val)===JSON.stringify(chain);
        document.getElementById("game").innerHTML=`
          <h2>Word Memory Chain</h2>
          <p>${username}: ${correct?"Correct":"Wrong"} in ${(timeTaken/1000).toFixed(3)}s</p>
          ${correct?showLeaderboard("wordMemory","default",(a,b)=>a.timeTaken-b.timeTaken):""}
          <button onclick="showMenu()">Back to Menu</button>
        `;
        if(correct) saveLeaderboard("wordMemory","default",{name:username,score:timeTaken,timeTaken},(a,b)=>a.timeTaken-b.timeTaken);
      };
    }

    showMenu();
  </script>
</body>
</html>

